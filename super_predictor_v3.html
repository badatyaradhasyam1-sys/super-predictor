<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Super Predictor">
  <title>Super Predictor</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background: #1b2459;
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }
    .container {
      background: #1b2459;
      width: 100%;
      max-width: 420px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px;
      gap: 12px;
    }
    h2 {
      color: #e53935;
      font-size: 22px;
      font-weight: bold;
      text-align: center;
    }
    .clock-box {
      background: #000;
      color: #00ff00;
      font-size: 22px;
      font-weight: bold;
      padding: 6px 20px;
      border-radius: 10px;
      font-family: monospace;
      width: 100%;
      text-align: center;
    }
    .period-text {
      color: #fff;
      font-size: 26px;
      font-weight: bold;
    }
    .pred-box {
      background: #27346f;
      border-radius: 12px;
      padding: 16px;
      width: 100%;
      text-align: center;
    }
    .pred-num {
      font-size: 52px;
      font-weight: bold;
      color: #fff;
    }
    .pred-bs {
      font-size: 20px;
      font-weight: bold;
      color: #fff;
      margin: 4px 0;
    }
    .pred-col {
      font-size: 18px;
      font-weight: bold;
    }
    .pred-second {
      color: #aaa;
      font-size: 14px;
      margin-top: 6px;
    }
    .accuracy-box {
      display: flex;
      gap: 10px;
      width: 100%;
      justify-content: space-around;
    }
    .stat-item {
      background: #27346f;
      border-radius: 10px;
      padding: 10px;
      text-align: center;
      flex: 1;
    }
    .stat-label { color: #aaa; font-size: 11px; }
    .stat-val { color: #fff; font-size: 18px; font-weight: bold; }
    .wins-val { color: #2ecc71; }
    .losses-val { color: #e74c3c; }
    .section-label {
      color: #fff;
      font-size: 13px;
      width: 100%;
      text-align: center;
    }
    .input-row {
      display: flex;
      gap: 8px;
      width: 100%;
    }
    input[type=number] {
      flex: 1;
      padding: 12px;
      font-size: 20px;
      border-radius: 8px;
      border: none;
      text-align: center;
    }
    .btn {
      padding: 12px 16px;
      font-size: 15px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .btn-update { background: #f39c12; color: #000; flex: 1; }
    .btn-clear { background: #e74c3c; color: #fff; }
    .timer-box {
      background: #27346f;
      border-radius: 10px;
      padding: 10px;
      width: 100%;
      text-align: center;
    }
    .timer-label { color: #aaa; font-size: 12px; margin-bottom: 4px; }
    .timer-countdown { font-size: 32px; font-weight: bold; font-family: monospace; color: #f39c12; }
    .timer-countdown.urgent { color: #e74c3c; }
    .history-input {
      width: 100%;
      height: 80px;
      padding: 10px;
      font-size: 14px;
      border-radius: 8px;
      border: none;
      resize: none;
    }
    .btn-load { background: #2ecc71; color: #000; width: 100%; font-size: 15px; font-weight: bold; padding: 12px; border: none; border-radius: 8px; cursor: pointer; }
    .status-msg {
      font-size: 15px;
      font-weight: bold;
      text-align: center;
      min-height: 22px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }
    th {
      background: #111;
      color: #fff;
      padding: 8px 4px;
    }
    td {
      padding: 7px 4px;
      text-align: center;
      color: #eee;
      border-bottom: 1px solid #333;
    }
    .badge {
      padding: 3px 8px;
      border-radius: 12px;
      color: #fff;
      font-size: 12px;
      font-weight: bold;
    }
    .hint { color: #888; font-size: 11px; text-align: center; margin-top: 10px; }
  </style>
</head>
<body>
<div class="container">
  <h2>‚ö° Super Predictor ‚ö°</h2>

  <div class="clock-box" id="clock">00:00:00</div>

  <!-- Countdown Timer -->
  <div class="timer-box">
    <div class="timer-label">‚è± ‡§Ö‡§ó‡§≤‡•á period ‡§Æ‡•á‡§Ç ‡§¨‡§ö‡§æ ‡§∏‡§Æ‡§Ø</div>
    <div class="timer-countdown" id="countdown">01 : 00</div>
  </div>

  <div class="period-text" id="period">Period --</div>

  <!-- Prediction -->
  <div class="pred-box">
    <div class="pred-num" id="pred-num">-</div>
    <div class="pred-bs" id="pred-bs">-</div>
    <div class="pred-col" id="pred-col">-</div>
    <div class="pred-second" id="pred-second"></div>
  </div>

  <!-- Win/Loss Stats -->
  <div class="accuracy-box">
    <div class="stat-item">
      <div class="stat-label">Rounds</div>
      <div class="stat-val" id="rounds-val">0</div>
    </div>
    <div class="stat-item">
      <div class="stat-label">Wins</div>
      <div class="stat-val wins-val" id="wins-val">0</div>
    </div>
    <div class="stat-item">
      <div class="stat-label">Losses</div>
      <div class="stat-val losses-val" id="losses-val">0</div>
    </div>
    <div class="stat-item">
      <div class="stat-label">Accuracy</div>
      <div class="stat-val" id="acc-val">0%</div>
    </div>
  </div>
  <div class="status-msg" id="status-msg"></div>

  <!-- Actual number input -->
  <div class="section-label">‡§Ö‡§∏‡§≤‡•Ä ‡§®‡§Ç‡§¨‡§∞ ‡§Ü‡§Ø‡§æ ‡§§‡•ã ‡§°‡§æ‡§≤‡•ã:</div>
  <div class="input-row">
    <input type="number" id="entry" min="0" max="9" placeholder="0-9">
    <button class="btn btn-update" onclick="updateNumber()">Update ‡§ï‡§∞‡•ã</button>
    <button class="btn btn-clear" onclick="clearAll()">Clear</button>
  </div>

  <!-- History Table -->
  <div class="section-label">üìã ‡§™‡§ø‡§õ‡§≤‡•á 10 Periods ‡§ï‡•Ä History</div>
  <table>
    <thead>
      <tr>
        <th>Period</th>
        <th>Number</th>
        <th>Big/Small</th>
        <th>Color</th>
      </tr>
    </thead>
    <tbody id="history-body">
      <tr><td colspan="4" style="color:#aaa; padding:10px;">‡§Ö‡§≠‡•Ä ‡§ï‡•ã‡§à history ‡§®‡§π‡•Ä‡§Ç</td></tr>
    </tbody>
  </table>
  <div class="hint">‡§Ö‡§™‡§®‡•á ‡§Æ‡•á‡§π‡§®‡§§ ‡§ï‡§æ ‡§™‡•à‡§∏‡§æ ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡•Ä ‡§∏‡•á ‡§ñ‡•á‡§≤‡•ã</div>
</div>

<script>
  const BASE_MINUTES = 0;
  const BASE_PERIOD  = 9671;

  let pastNumbers = [3,8,9,7,6,3,2,6,9,3,1,7,3,4,4,3,4,9,7,5,2,3,5,9,8,4,2,2,0,3,8,0,4,3,8,4,5,7,2,3];
  let historyEntries = [];
  let lastSavedPeriod = null;
  let wins = 0, losses = 0, rounds = 0;
  let predictedNums = [];

  function getCurrentPeriod() {
    const now = new Date();
    const currentMinutes = now.getHours() * 60 + now.getMinutes();
    return BASE_PERIOD + (currentMinutes - BASE_MINUTES);
  }

  function numberToColor(n) {
    if (n === 0 || n === 5) return "violet";
    if ([1,3,7,9].includes(n)) return "red";
    return "green";
  }

  function getColorHex(col) {
    if (col === "violet") return "#7B1FA2";
    if (col === "red")    return "#e53935";
    return "#43a047";
  }

  // ‚úÖ Advanced prediction algorithm
  function getPrediction() {
    if (pastNumbers.length < 5) return { best: 0, second: 5 };
    const history = pastNumbers;
    const vote = {};
    const addVote = (n, weight=1) => { n = ((n%10)+10)%10; vote[n] = (vote[n]||0) + weight; };

    // 1. Overall frequency (weight 2)
    const freq = {};
    history.forEach(n => freq[n] = (freq[n]||0)+1);
    const sorted = Object.entries(freq).sort((a,b)=>b[1]-a[1]);
    addVote(parseInt(sorted[0][0]), 2);
    if (sorted.length > 1) addVote(parseInt(sorted[1][0]), 1);

    // 2. Recent last 10 frequency (weight 3)
    const freq10 = {};
    history.slice(-10).forEach(n => freq10[n] = (freq10[n]||0)+1);
    const s10 = Object.entries(freq10).sort((a,b)=>b[1]-a[1]);
    addVote(parseInt(s10[0][0]), 3);
    if (s10.length > 1) addVote(parseInt(s10[1][0]), 2);

    // 3. Last 3 sum % 10
    addVote(history.slice(-3).reduce((a,b)=>a+b,0) % 10, 2);

    // 4. Last 5 sum % 10
    addVote(history.slice(-5).reduce((a,b)=>a+b,0) % 10, 1);

    // 5. Last 4 average % 10
    addVote(Math.floor(history.slice(-4).reduce((a,b)=>a+b,0)/4), 1);

    // 6. Last + prev % 10
    if (history.length >= 2)
      addVote((history[history.length-1] + history[history.length-2]) % 10, 2);

    // 7. Last + prev*2 % 10
    if (history.length >= 2)
      addVote((history[history.length-1] + history[history.length-2]*2) % 10, 1);

    // 8. Pattern gap
    const last = history[history.length-1];
    const prevIdx = history.slice(0,-1).lastIndexOf(last);
    if (prevIdx >= 0) addVote((last + (history.length-1-prevIdx)) % 10, 2);

    // 9. Streak breaker
    const l = history.length;
    if (l >= 3 && history[l-1] === history[l-2] && history[l-2] === history[l-3])
      addVote((history[l-1] + 5) % 10, 3);

    // 10. Big/Small balance
    const bsSum = history.slice(-6).filter(n=>n>=5).length;
    if (bsSum <= 1) addVote(7, 2);
    if (bsSum >= 5) addVote(2, 2);

    // 11. LCG seed
    let seed = getCurrentPeriod();
    for (let num of history.slice(-20))
      seed = (seed * 1103515245 + 12345 + num) % (2**31);
    addVote(seed % 10, 1);

    // 12. Cold number (‡§ú‡•ã ‡§≤‡§Ç‡§¨‡•á ‡§∏‡•á ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§Ø‡§æ)
    const lastSeen = {};
    history.forEach((n,i) => lastSeen[n] = i);
    let coldNum = 0, coldIdx = history.length;
    for (let i=0; i<=9; i++) {
      const idx = lastSeen[i] !== undefined ? lastSeen[i] : -1;
      if (idx < coldIdx) { coldIdx = idx; coldNum = i; }
    }
    addVote(coldNum, 2);

    const vSorted = Object.entries(vote).sort((a,b)=>b[1]-a[1]);
    const best = parseInt(vSorted[0][0]);
    const second = vSorted.length > 1 ? parseInt(vSorted[1][0]) : (best+5)%10;

    return { best, second };
  }

  function updateHistoryTable() {
    const tbody = document.getElementById('history-body');
    tbody.innerHTML = '';
    if (historyEntries.length === 0) {
      tbody.innerHTML = '<tr><td colspan="4" style="color:#aaa; padding:10px;">‡§Ö‡§≠‡•Ä ‡§ï‡•ã‡§à history ‡§®‡§π‡•Ä‡§Ç</td></tr>';
      return;
    }
    const last10 = historyEntries.slice(-10).reverse();
    last10.forEach(entry => {
      const row = document.createElement('tr');
      const bsColor = entry.bs === "Big" ? "#1565C0" : "#6A1B9A";
      row.innerHTML = `
        <td>${entry.period}</td>
        <td style="font-size:18px;">${entry.number}</td>
        <td><span class="badge" style="background:${bsColor}">${entry.bs}</span></td>
        <td><span class="badge" style="background:${getColorHex(entry.col)}">${entry.col}</span></td>
      `;
      tbody.appendChild(row);
    });
  }

  function updateDisplay() {
    const now = new Date();
    const h = String(now.getHours()).padStart(2,'0');
    const m = String(now.getMinutes()).padStart(2,'0');
    const s = String(now.getSeconds()).padStart(2,'0');
    document.getElementById('clock').textContent = `${h}:${m}:${s}`;

    // Countdown timer - sirf seconds
    const secsLeft = 59 - now.getSeconds();
    const el = document.getElementById('countdown');
    el.textContent = `${secsLeft} sec`;
    el.className = secsLeft <= 10 ? 'timer-countdown urgent' : 'timer-countdown';

    const periodId = getCurrentPeriod();
    document.getElementById('period').textContent = `Period ${periodId}`;

    const { best, second } = getPrediction();
    predictedNums = [best, second];
    const bs = best >= 5 ? "Big" : "Small";
    const col = numberToColor(best);

    document.getElementById('pred-num').textContent = best;
    document.getElementById('pred-bs').textContent = bs;
    const colEl = document.getElementById('pred-col');
    colEl.textContent = col;
    colEl.style.color = getColorHex(col);
    document.getElementById('pred-second').textContent = `‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§: ${second}`;

    if (lastSavedPeriod === null) {
      lastSavedPeriod = periodId;
    } else if (periodId !== lastSavedPeriod) {
      const oldPred = getPrediction();
      const oldBest = oldPred.best;
      historyEntries.push({
        period: lastSavedPeriod,
        number: oldBest,
        bs: oldBest >= 5 ? "Big" : "Small",
        col: numberToColor(oldBest)
      });
      lastSavedPeriod = periodId;
      updateHistoryTable();
    }
  }

  function updateNumber() {
    const val = parseInt(document.getElementById('entry').value);
    if (isNaN(val) || val < 0 || val > 9) return;

    rounds++;
    if (predictedNums.includes(val)) {
      wins++;
      document.getElementById('status-msg').textContent = "WIN ‚úÖ";
      document.getElementById('status-msg').style.color = "#2ecc71";
    } else {
      losses++;
      document.getElementById('status-msg').textContent = "LOSS ‚ùå";
      document.getElementById('status-msg').style.color = "#e74c3c";
    }

    document.getElementById('rounds-val').textContent = rounds;
    document.getElementById('wins-val').textContent = wins;
    document.getElementById('losses-val').textContent = losses;
    const acc = Math.round((wins/rounds)*100);
    document.getElementById('acc-val').textContent = acc + "%";

    pastNumbers.push(val);
    if (pastNumbers.length > 80) pastNumbers.shift();
    document.getElementById('entry').value = '';
    updateDisplay();
  }

  function loadHistory() {
    const text = document.getElementById('history-entry').value;
    const nums = [];
    text.split(/[^0-9]/).forEach(part => {
      if (part.length === 1 && !isNaN(part)) nums.push(parseInt(part));
    });
    if (nums.length < 5) {
      document.getElementById('status-msg').textContent = "‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 5 numbers ‡§°‡§æ‡§≤‡•ã!";
      document.getElementById('status-msg').style.color = "#e74c3c";
      return;
    }
    pastNumbers = nums.slice(-50);
    document.getElementById('status-msg').textContent = `${nums.length} numbers loaded! ‚úÖ`;
    document.getElementById('status-msg').style.color = "#2ecc71";
    document.getElementById('history-entry').value = '';
    updateDisplay();
  }

  function clearAll() {
    wins = losses = rounds = 0;
    predictedNums = [];
    document.getElementById('rounds-val').textContent = 0;
    document.getElementById('wins-val').textContent = 0;
    document.getElementById('losses-val').textContent = 0;
    document.getElementById('acc-val').textContent = "0%";
    document.getElementById('status-msg').textContent = "";
    historyEntries = [];
    updateHistoryTable();
  }

  setInterval(updateDisplay, 1000);
  updateDisplay();
</script>
</body>
</html>
